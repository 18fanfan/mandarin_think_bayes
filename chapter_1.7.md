## 章節 1：貝葉斯定理（Bayes's Theorem）

### 1.7 蒙提霍爾問題<sup>1</sup>（Monty Hall Problem）

蒙提霍爾問題可能是機率史上最具爭議的問題。他的情境很簡單，但是正確答案卻是這麼得違反直覺，所以很多人不能接受答案。並且許多聰明的人會因為答錯而感到尷尬，並且在公開場合爭論他的選擇的答案。

蒙提霍爾（Monty Hall）原本是一個遊戲節目 Let's Make a Deal 的主持人。蒙提霍爾問題是節目中的常規遊戲。假設你在節目中，以下是遊戲流程：

1. 主持人蒙提會跟你說現在有三個門，每一扇門後面都有獎品。其中一個獎品是汽車，另外兩個是沒什麼價值的獎品，例如假指甲、花生醬之類的。獎品是隨機對應的。
2. 你的目標是猜出哪扇門有汽車。如果你猜對了，你就得到汽車。
3. 假設你選一個門，我們稱作 A。另外兩個門稱為 B 跟 C。
4. 在揭曉你選的門 A 之前，主持人蒙提會開啟另外任一扇 B 或 C 沒有汽車的門。（如果汽車真的在門 A 後，那主持人蒙提便可以任意的選擇門 B 或 C）
5. 接著主持人蒙提會問你要堅持原本的選擇，還是換到另一個沒有開啟的門。

所以問題就是，你要不要改變選擇，還是說其實換不換是沒差的？

大部分人的直覺上會認為沒有差別。因為剩下兩個門，所以汽車在門 A 後面的機率是 50% 。

但這是錯誤的。事實上，如果你堅持選門 A 贏得汽車的機率是 1/3；但如果你換了門，你贏得汽車的機率是 2/3。

套用貝葉斯定理，我們將此問題分解成簡單的小問題，並且說服自己 2/3 是正確的答案。

再開始之前，我們要小心的定義 data 。在這個例子中 D 包含兩個部分，**主持人蒙提打開了門 B 並且門 B 後面沒有汽車**。

接下來我們定義三個假設：A、B 和 C 分別代表門 A 、門 B 和門 C 後面有汽車。再一次我們利用上一小節的表格方法：

<table>
<tr><td></td><td>先驗機率 p(H)</td><td>似然性 p(D|H)</td><td>p(H)p(D|H)</td><td>後驗機率 p(H|D)</td></tr>
<tr><td>A</td><td>1/3</td><td>1/2</td><td>1/6</td><td>1/3</td></tr>
<tr><td>B</td><td>1/3</td><td>0</td><td>0</td><td>0</td></tr>
<tr><td>C</td><td>1/3</td><td>1</td><td>1/3</td><td>2/3</td></tr>
</table>

寫出先驗機率是容易的，因為我們知道獎品是隨機擺放的，所以假設每個門後面有車的機率都是一樣的。
似然性函數就需要花些時間思考，但在合理謹慎的情況下，我們可以確信這是對的：

* 如果汽車是在門 A 後面，則蒙提可以任選門 B 或是門 C。所以蒙提打開門 B 的機率是 1/2（因為已經知道蒙提打開了門 B 並且門 B 後面沒有汽車）
* 如果汽車是在門 B 後面，則蒙提必須要打開門 C，所以蒙提打開門 B 的機率是 0。
* 如果汽車是在門 C 後面，則蒙提打開門 B 的機率必定是 1 ，並且**門 B 後面沒有汽車的機率是 1**。

到目前為止，困難的部分已經結束；只剩下數字計算。第三欄的加總為 1/6+1/3 = 1/2。將後驗機率除以 1/2 得到 p(A|D) = 1/3 和 p(C|D) = 2/3。所以你最好選擇換門。

有很多蒙提霍爾問題的變形。貝葉斯方法的其中一個強項就在於它可以囊括處理這些變形問題。
例如，假設蒙提如果可以的話只會打開門 B ，如果汽車在門 B 後面才會打開門 C。在這種情況下，我們修改上方的表程變成：

<table>
<tr><td></td><td>先驗機率 p(H)</td><td>似然性 p(D|H)</td><td>p(H)p(D|H)</td><td>後驗機率 p(H|D)</td></tr>
<tr><td>A</td><td>1/3</td><td>1</td><td>1/3</td><td>1/2</td></tr>
<tr><td>B</td><td>1/3</td><td>0</td><td>0</td><td>0</td></tr>
<tr><td>C</td><td>1/3</td><td>1</td><td>1/3</td><td>1/2</td></tr>
</table>

其中只有改變 p(D|A)。如果汽車在門 A 後方，蒙提可以選擇開門 B 或門 C。但是在這種變形問題下，他只會開門 B ，也就是說 p(D|A) = 1。

結果，A 和 C 的似然性是一樣的，並且後驗機率也是一樣：p(A|D) = p(C|D) = 1/2。在這個例子中，蒙提選擇開門 B的事實並未有提供汽車的位置資訊，所以無論參賽者換或不換門的機率是一樣的。

換句話說，如果他開門 C 我們就知道 p(B|D) = 1。

我將蒙提霍爾問題納入此章節，因為我認為這個問題很有趣，並且貝葉斯定理使得這個問題的複雜度可以管理。但**這不是貝葉斯定理典型的用法，所以如果你還是很困惑，不用擔心！！**

---

1. 這又稱為三門問題